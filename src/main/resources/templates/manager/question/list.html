<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">

<head>
    <title>Quản lý câu hỏi</title>
</head>

<body>
<div layout:fragment="content">

    <!-- Header section -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h4 mb-0 text-dark">
                <i class="bi bi-question-circle text-primary"></i> Quản lý câu hỏi
            </h1>
            <p class="text-muted mb-0">Danh sách các câu hỏi được gửi lên hệ thống</p>
        </div>
        <a href="#" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Thêm mới
        </a>
    </div>

    <!-- Table card -->
    <div class="card border-0 shadow-sm">
        <div class="card-body p-0">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-dark text-center">
                    <tr>
                        <th style="width: 5%">ID</th>
                        <th style="width: 35%">Tiêu đề</th>
                        <th style="width: 15%">Tác giả</th>
                        <th style="width: 10%">Lượt xem</th>
                        <th style="width: 10%">Bình chọn</th>
                        <th style="width: 15%">Ngày tạo</th>
                        <th style="width: 10%">Trạng thái</th>
                        <th style="width: 10%">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="q : ${questions}" class="text-center">
                        <td th:text="${q.id}"></td>
                        <td class="text-start">
                            <a th:href="@{'/manager/questions/' + ${q.id}}"
                               th:text="${q.title}"
                               class="fw-semibold text-decoration-none text-dark"></a>
                        </td>
                        <td th:text="${q.author != null ? q.author.username : 'Ẩn danh'}"></td>
                        <td th:text="${q.views}"></td>
                        <td th:text="${q.votes}"></td>
                        <td th:text="${#temporals.format(q.createdAt, 'dd/MM/yyyy HH:mm')}"></td>
                        <td>
                            <span th:text="${q.isApproved ? 'Đã duyệt' : 'Chờ duyệt'}"
                                  th:classappend="${q.isApproved ? 'badge bg-success' : 'badge bg-warning text-dark'}"></span>
                        </td>
                        <td>
                            <a th:href="@{'/manager/questions/' + ${q.id}}"
                               class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-eye"></i> Xem
                            </a>
                        </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(questions)}">
                        <td colspan="8" class="text-center text-muted py-4">
                            <i class="bi bi-inbox"></i> Không có câu hỏi nào.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<!-- Optional fade-in animation -->
<style>
    [layout\:fragment="content"] {
        animation: fadeIn 0.3s ease-in-out;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>

</body>
</html>
